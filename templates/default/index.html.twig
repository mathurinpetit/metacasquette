{% extends 'base.html.twig' %}
{% block body %}
{% set links = [{"link" : "oeuvre", "text" : "Une œuvre d'art unique"},
                {"link" : "fabrication_francaise", "text" : "Fabriquée en France"},
                {"link" : "fait_main", "text" : "Fait main"},
                {"link" : "upcyclee", "text" : "Upcyclée"}]
%}

{% if mobile %}

    <nav class="navbar navbar-default" style="background-color: #000; border: 0;" >
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <div class="masthead-brand">
            <h3 class=""><i class="fa fa-phone fa-fw"><a href="tel:{{ telephone|replace({' ':''})  }}"></i> {{ telephone }}<br><small>Contact <i class="fa fa-level-up"></i></small></a></h3>
          </div>
          <div class="masthead-brand">
            <button type="button" class="navbar-toggle collapsed btn btn-lg" data-toggle="collapse" data-target="#menu" aria-expanded="true" style="float: left; padding: 16px 19px;" >
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="collapse navbar-collapse" id="menu">
              <ul class="nav navbar-nav">
                {% for link in links %}
                <li><a href="#{{ link.link }}">{{ link.text }}</a></li>
                {% endfor %}
                <li><a href="#modeles">Modèles</a></li>
                <li><a href="#contact">Contact/commandes</a></li>
              </ul>
            </div>
          </div>
          <ul class="nav masthead-nav">
            <li><a href="mailto:{{ email }}"><i class="fa-solid fa-envelope fa-3x"></i></a></li>
            <li><a href="{{ facebook }}"><i class="fa-brands fa-facebook-f fa-3x"></i></a></li>
            <li><a href="{{ instagram }}"><i class="fa-brands fa-instagram fa-3x"></i></a></li>
          </ul>

        </div>
      </div>
    </nav>
  {% endif %}
  <div class="site-wrapper video-background">

    <a id="bgndVideo" class="player" data-property="{videoURL:'http://youtu.be/{{ ytid }}', containment:'body', autoPlay:true, mute:true, startAt:1, stopAt: 53, opacity:0.7, }"></a>

    <div class="overlay"></div>

    <div class="site-wrapper-inner">

      {% if not mobile %}
      <div class="masthead clearfix" >
        <div class="inner">
          <h3 class="masthead-brand"><i class="fa fa-phone fa-fw"><a href="tel:{{ telephone|replace({' ':''})  }}"></i> {{ telephone }}<br><small>Contact <i class="fa fa-level-up"></i></small></a></h3>
          <nav class="visible-md-block visible-lg-block">
            <ul class="nav masthead-nav">
                <li><a href="mailto:{{ email }}"><i class="fa-solid fa-envelope fa-lg"></i></a></li>
                <li><a href="{{ facebook }}"><i class="fa-brands fa-facebook-f fa-lg"></i></a></li>
                <li><a href="{{ instagram }}"><i class="fa-brands fa-instagram fa-lg"></i></a></li>
              </ul>
            </nav>
            </div>
          </div>
          {% endif %}

          <div class="cover-container">
            <div class="inner cover">
              <img class="img-responsive" src="{{ asset('/img/logo/logo_detache_white.png') }}" alt="/MetaCasquette"><h1 class="cover-heading">/META CASQUETTE</h1>
              <h1><em>Une œuvre d'art sur la tête</em></h1>
              <h2 class="lead" style="font-size:22px;">
                {% for link in links %}
                <a href="#{{ link.link }}" style="text-decoration:underline;">{{ link.text }}</a>{% if not loop.last %} / {% endif %}
                {% endfor %}
              </h2>
            </div>

            <p class="lead fleche-bas"><a href="#start" class="btn btn-lg btn-default"><i class="fa fa-chevron-down"></i></a></p>
          </div>

        </div>
      </div>

      <div class="container-fluid overlay-mask" id="start" >
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-8 col-md-offset-2">
            <div class="row">
              {% for itemIndex in 0..3 %}
              {% set casquette = casquettes[randCasquettes[itemIndex]] %}
              {% set modelNumber = "%04d"|format(casquette[0]) %}
              <div class="col-xs-6 col-sm-6 col-md-6 thumbnail-wrapper">
                <a href="#{{ links[itemIndex].link }}" class="thumbnail img-hover"  >
                  <img src="{{ asset('/img/casquettes/'~modelNumber~'/'~modelNumber~'.jpg') }}" alt="{{ casquette[5] }}">
                  <h2>{{ links[itemIndex].text }}</h2>
                </a>
              </div>
              {% endfor %}

            </div>
          </div>
        </div>
      </div>

      {{ include('default/description_light.html.twig', {'casquettes' : casquettes, 'randCasquettes' : randCasquettes}) }}

      <div class="overlay-mask" class="modeles" id="modeles">
        <h2 style="text-decoration:underline;">Modèles</h2>
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12 col-xs-12 col-sm-12">
                  {% set cpt = 0 %}
                  {% for casquette in casquettes|reverse %}

                  {% if "#" in casquette[0] %}
                  {% else %}
                  {% set modelNumber = "%04d"|format(casquette[0]) %}
                  {% set pictureNumber = casquette[8] %}
                    {% set cpt=cpt+1 %}

                    <div class="col-xs-6 col-sm-6 col-md-4 wrapper model {% if cpt > 12 %}hidden{% endif %}">
                      {% if pictureNumber matches '/^\\d+$/' %}
                        <div id="casquette_{{ modelNumber }}" data-number="{{ pictureNumber }}" data-name="{{ modelNumber }}" class="rotate360" ></div>
                      {% else %}
                        <img class="img_not_360" src="{{ asset('/img/casquettes/'~modelNumber~'/product/01.jpg') }}" alt="{{ casquette[5] }}" style="z-index:-1" >
                      {% endif %}
                      {% set disponible = casquette[6] %}
                      <a class="overlay-mobile" href="{{ path('produit', {'id' : modelNumber}) }}" ></a>
                      <h2>#{{ modelNumber }} - {{ casquette[5] }} <small>({{ casquette[1] }})</small></h2>
                      <div class="row">
                        <div class="col-sm-12 col-md-12" style="text-align:left;">
                          <p>{{ casquette[2] }}</p>
                          <p>Taille : {{ casquette[4] }}{% if disponible and disponible starts with 'https://www.etsy.com' %} <a href="{{ disponible }}" style="margin-right: 25px;"  class="pull-right btn btn-lg btn-default">ACHETER ICI</a>
                                                        {% elseif disponible %}
                                                        <button href="{{ disponible }}" style="margin-right: 25px;" disabled="disabled" class="pull-right btn btn-lg btn-default">{{ disponible }}</button>
                                                        {% endif %}</p>
                        </div>
                      </div>
                      {% if not mobile %}
                      <a data-toggle="modal" data-target="#popup_{{ modelNumber }}" class="img-hover maximize">
                        <i class="fa-solid fa-maximize"></i>
                      </a>
                      {% else %}
                      <a class="img-hover maximize" href="{{ path('produit', {'id' : modelNumber}) }}">
                        <i class="fa-solid fa-maximize"></i>
                      </a>
                      {% endif %}
                    </div>
                    {% endif %}
                  {% endfor %}
                  <br/>
                  <br/>
                  <br/>
                  <a id="plus" class="btn btn-lg btn-default" style="margin-top: 40px; margin-right:30px" >Voir plus de modèles</a>
                  <div id="dummy"></div>
                </div>

          </div>
        </div>
              <!-- gif  -->
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-12">
                    <img src="{{ asset('/img/casquettes/gif_anime_long_sort22.gif') }}" style="width:100%">
                  </div>
                </div>
              </div>

    </div>


{% for casquette in casquettes %}
{% set modelNumber = "%04d"|format(casquette[0]) %}
{% set pictureNumber = casquette[8] %}
<!-- Modal -->
<div class="modal fade" id="popup_{{ modelNumber }}">
  <div class="modal-dialog modal-lg" style="background-color:black; width:70%" >
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{ "#" ~ modelNumber }} - {{ casquette[5] }} <small>({{ casquette[1] }})</small></h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-10 col-md-10 col-sm-offset-1 col-md-offset-1">
            <div class="row">
              {% if pictureNumber matches '/^\\d+$/' %}
              <div class="col-sm-12 col-md-6 img-mobile">
                <div id="casquette_{{ modelNumber }}_mobile" data-number="{{ pictureNumber }}" data-name="{{ modelNumber }}" class="rotate360mobile" ></div>
              </div>
              {% endif %}
              <div class="col-sm-12 col-md-6">
                <img src="{{ asset('/img/casquettes/'~modelNumber~'/'~modelNumber~'_side01.jpg') }}" alt="{{ casquette[5] }}" class="img-responsive" />
              </div>
              <div class="col-sm-12 col-md-6">
                <img src="{{ asset('/img/casquettes/'~modelNumber~'/'~modelNumber~'_side02.jpg') }}" alt="{{ casquette[5] }}" class="img-responsive" />
              </div>
            </div>
          </div>
      </div>
        <h2>{{ casquette[2] }}<br/><small><i>{{ casquette[3] }}</i></small></h2>
        {% set disponible = casquette[6] %}
        <p>Taille : {{ casquette[4] }}{% if disponible and disponible starts with 'https://www.etsy.com' %} <a href="{{ disponible }}" class="pull-right btn btn-lg btn-default">ACHETER ICI</a>
                                      {% elseif disponible %} <strong>{{ disponible }}</strong>
                                      {% endif %}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg btn-default" data-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}


{% endblock %}
