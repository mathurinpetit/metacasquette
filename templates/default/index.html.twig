{% extends 'base.html.twig' %}
{% block body %}
{% if mobile %}
<div class="masthead clearfix" style="background-color: #000;">
  <div class="inner">
    <h3 class="masthead-brand"><i class="fa fa-phone fa-fw"><a href="tel:{{ telephone|replace({' ':''})  }}"></i> {{ telephone }}<br><small>Contact <i class="fa fa-level-up"></i></small></a></h3>
      <nav class="visible-sm-block visible-xs-block">
        <ul class="nav masthead-nav">
            <li><a href="{{ facebook }}"><i class="fa-brands fa-facebook-f fa-3x"></i></a></li>
            <li><a href="{{ instagram }}"><i class="fa-brands fa-instagram fa-3x"></i></a></li>
            <li><a href="mailto:{{ email }}"><i class="fa fa-envelope fa-3x"></i></a></li>
          </ul>
        </nav>
      </div>
    </div>
  {% endif %}
  <div class="site-wrapper video-background">

    <a id="bgndVideo" class="player" data-property="{videoURL:'http://youtu.be/{{ ytid }}', containment:'body', autoPlay:true, mute:true, startAt:1, stopAt: 53, opacity:0.7, }"></a>

    <div class="overlay"></div>

    <div class="site-wrapper-inner">

      {% if not mobile %}
      <div class="masthead clearfix" >
        <div class="inner">
          <h3 class="masthead-brand"><i class="fa fa-phone fa-fw"><a href="tel:{{ telephone|replace({' ':''})  }}"></i> {{ telephone }}<br><small>Contact <i class="fa fa-level-up"></i></small></a></h3>
          <nav class="visible-md-block visible-lg-block">
            <ul class="nav masthead-nav">
                <li><a href="{{ facebook }}"><i class="fa-brands fa-facebook-f fa-lg"></i></a></li>
                <li><a href="{{ instagram }}"><i class="fa-brands fa-instagram fa-lg"></i></a></li>
                <li><a href="mailto:{{ email }}"><i class="fas fa-envelope fa-lg"></i></a></li>
              </ul>
            </nav>
            </div>
          </div>
          {% endif %}

          <div class="cover-container">
            <div class="inner cover">
              <img class="img-responsive" src="{{ asset('/img/logo/logo_detache_white.png') }}" alt="/MetaCasquette"><h1 class="cover-heading">/META CASQUETTE</h1>
              <h1><em>Une œuvre d'art sur la tête</em></h1>
              <h2 class="lead" style="font-size:22px;"><a href="#oeuvre" style="text-decoration:underline;">Une œuvre d'art unique</a> / <a href="#fabrication_francaise" style="text-decoration:underline;">Fabriquée en France</a>  / <a href="#fait_main" style="text-decoration:underline;">Fait main</a> / <a href="#upcyclee" style="text-decoration:underline;">Upcyclée</a></h2>
            </div>

            <p class="lead fleche-bas"><a href="#start" class="btn btn-lg btn-default"><i class="fa fa-chevron-down"></i></a></p>
          </div>

        </div>
      </div>

      <div class="container-fluid overlay-mask" id="start" >
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-8 col-md-offset-2">
            <div class="row">
              {% for itemIndex in 0..3 %}
              {% set casquette = casquettes[randCasquettes[itemIndex]] %}
              {% set modelNumber = "%04d"|format(casquette[0]) %}
              <div class="col-xs-6 col-sm-6 col-md-6 thumbnail-wrapper">
                <a href="#oeuvre" class="thumbnail img-hover"  >
                  <img src="{{ asset('/img/casquettes/'~modelNumber~'/'~modelNumber~'.jpg') }}" alt="{{ casquette[5] }}">
                </a>
              </div>
              {% endfor %}

            </div>
          </div>
        </div>
      </div>

      {{ include('default/description_light.html.twig', {'casquettes' : casquettes, 'randCasquettes' : randCasquettes}) }}

      <div class="overlay-mask" class="modeles" id="modeles">
        <h2 style="text-decoration:underline;">Modèles</h2>
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12 col-xs-12 col-sm-12">
                  {% for casquette in casquettes|reverse %}
                  {% set modelNumber = "%04d"|format(casquette[0]) %}
                  {% set pictureNumber = casquette[8] %}
                    <div class="col-xs-6 col-sm-6 col-md-4 wrapper">
                      {% if pictureNumber matches '/^\\d+$/' %}
                        <div id="casquette_{{ modelNumber }}" data-number="{{ pictureNumber }}" data-name="{{ modelNumber }}" class="rotate360" ></div>
                      {% else %}
                        <img src="{{ asset('/img/casquettes/'~modelNumber~'/product/01.jpg') }}" alt="{{ casquette[5] }}" style="z-index:-1" >
                      {% endif %}
                      {% if casquette[7] %}
                       <div class="vendu">
                          <center><b>VENDU</b></center>
                        </div>
                      {% endif %}
                      <div class="overlay-mobile" ></div>
                      <h2>#{{ modelNumber }} - {{ casquette[5] }} <small>({{ casquette[1] }})</small></h2>
                      <div class="row">
                        <div class="col-sm-12 col-md-12" style="text-align:left;">
                          <p>{{ casquette[2] }}</p>
                          <p>Taille : {{ casquette[4] }}cm / {% if casquette[7] %}Vendue{% else %}Prix : {{ casquette[6] }} €{% endif %}</p>
                        </div>
                      </div>
                      <a data-toggle="modal" data-target="#popup_{{ modelNumber }}" class="img-hover maximize">
                        <i class="fa-solid fa-maximize"></i>
                      </a>
                    </div>
                  {% endfor %}
                  <div id="dummy"></div>
                </div>

          </div>
        </div>
              <!-- gif  -->
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-12">
                    <img src="{{ asset('/img/casquettes/gif_anime_long_sort22.gif') }}" style="width:100%">
                  </div>
                </div>
              </div>

    </div>

  </div>
</div>

{% for casquette in casquettes %}
{% set modelNumber = "%04d"|format(casquette[0]) %}
{% set pictureNumber = casquette[8] %}
<!-- Modal -->
<div class="modal fade" id="popup_{{ modelNumber }}">
  <div class="modal-dialog modal-lg" style="background-color:black; width:70%" >
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{ "#" ~ modelNumber }} - {{ casquette[5] }} <small>({{ casquette[1] }})</small></h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-10 col-md-10 col-sm-offset-1 col-md-offset-1">
            <div class="row">
              {% if pictureNumber matches '/^\\d+$/' %}
              <div class="col-sm-12 col-md-6">
                <div id="casquette_{{ modelNumber }}_mobile" data-number="{{ pictureNumber }}" data-name="{{ modelNumber }}" class="rotate360mobile" ></div>
              </div>
              {% endif %}
              <div class="col-sm-12 col-md-6">
                <img src="{{ asset('/img/casquettes/'~modelNumber~'/'~modelNumber~'_side01.jpg') }}" alt="{{ casquette[5] }}" class="img-responsive" />
              </div>
              <div class="col-sm-12 col-md-6">
                <img src="{{ asset('/img/casquettes/'~modelNumber~'/'~modelNumber~'_side02.jpg') }}" alt="{{ casquette[5] }}" class="img-responsive" />
              </div>
            </div>
          </div>
      </div>
        <h2>{{ casquette[2] }}<br/><small><i>{{ casquette[3] }}</i></small></h2>
        <p>Taille : {{ casquette[4] }}cm / {% if casquette[7] %}Vendue{% else %}Prix : {{ casquette[6] }} €{% endif %}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg btn-default" data-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}


{% endblock %}
